{% extends "layout.html" %}

{% block content %}
    <meta http-equiv="refresh" content="5">  <!-- Page auto-refresh every 5 seconds -->

    <div class="box">
        <h2>Inventory Check</h2>

        <!-- Flash Messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="flash-messages" style="margin-top: 20px;">
                    {% for category, message in messages %}
                        <div style="padding: 10px; border-radius: 5px; margin-bottom: 10px; 
                                    {% if category == 'success' %} background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb;
                                    {% elif category == 'error' %} background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb;
                                    {% elif category == 'warning' %} background-color: #fff3cd; color: #856404; border: 1px solid #ffeeba;
                                    {% else %} background-color: #cce5ff; color: #004085; border: 1px solid #b8daff; 
                                    {% endif %}">
                            {{ message }}
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        <!-- RFID and Label Input Form -->
        <form method="POST" style="display: flex; flex-direction: column; gap: 10px; margin-bottom: 20px;">
            <input type="text" name="rfid" placeholder="RFID" required style="padding: 10px; border-radius: 5px; border: 1px solid #ccc;">
            <input type="text" name="label" placeholder="Label" required style="padding: 10px; border-radius: 5px; border: 1px solid #ccc;">
            <input type="submit" value="Add RFID" style="padding: 10px; background-color: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer;">
        </form>

        <!-- Inventory Mode Buttons -->
        <div style="display: flex; gap: 20px; justify-content: center; margin-top: 20px; margin-bottom: 20px;">
            <button id="start-inventory" style="padding: 10px 20px; background-color: #2196F3; color: white; border: none; border-radius: 5px; cursor: pointer;">Start Inventory Mode</button>
            <button id="finish-inventory" style="padding: 10px 20px; background-color: #FF5722; color: white; border: none; border-radius: 5px; cursor: pointer; display: none;">Finish Inventory Mode</button>
        </div>

        <!-- RFID and Label Table -->
        <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
            <thead>
                <tr style="background-color: #f4f4f4; text-align: left;">
                    <th style="padding: 8px;">RFID</th>
                    <th style="padding: 8px;">Label</th>
                    <th style="padding: 8px;">Actions</th>  <!-- New Actions Column -->
                </tr>
            </thead>
            <tbody id="inventory-list">
                {% for tag in inventory_tags %}
                    <tr style="border-bottom: 1px solid #ddd;">
                        <td style="padding: 8px;">{{ tag.rfid }}</td>
                        <td style="padding: 8px;">{{ tag.label }}</td>
                        <td style="padding: 8px;">
                            <!-- Edit and Delete Actions -->
                            <a href="{{ url_for('edit_inventory', id=tag.id) }}" style="text-decoration: none; color: #4CAF50;">Edit</a> | 
                            <a href="{{ url_for('delete_inventory', id=tag.id) }}" style="text-decoration: none; color: red;" onclick="return confirm('Are you sure you want to delete this item?');">Delete</a>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- Logout and Mode Select Button -->
        <div style="margin-top: 20px; text-align: right;">
            <a href="{{ url_for('mode_selection') }}" style="padding: 10px 20px; background-color: #4CAF50; color: white; text-decoration: none; border-radius: 5px; margin-right: 10px;">Mode Select</a>
            <a href="{{ url_for('logout') }}" style="padding: 10px 20px; background-color: #f44336; color: white; text-decoration: none; border-radius: 5px;">Logout</a>
        </div>
    </div>

{% endblock %}
