{% extends "layout.html" %}
{% block content %}
<div class="box">
    <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 20px;">
        <img src="{{ url_for('static', filename='DONB.png') }}" alt="Don Bosco Logo" style="height: 100px;">
        <div style="font-size: 20px; font-weight: bold; line-height: 1.2;">
            IoT-Based Indoor<br>
            Positioning System
        </div>
    </div>

    <h1>RFID Tag Manager</h1>

    <form method="POST">
        <input type="text" name="rfid" placeholder="Enter RFID" required>
        <input type="text" name="label" placeholder="Enter Label" required>
        <button type="submit">Add RFID</button>
    </form>

    <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
        <thead>
            <tr style="background-color: #f2f2f2;">
                <th style="padding: 10px; border: 1px solid #ddd;">ID</th>
                <th style="padding: 10px; border: 1px solid #ddd;">RFID</th>
                <th style="padding: 10px; border: 1px solid #ddd;">Label</th>
                <th style="padding: 10px; border: 1px solid #ddd;">Last Seen</th>
                <th style="padding: 10px; border: 1px solid #ddd;">Time</th>
                <th style="padding: 10px; border: 1px solid #ddd;">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for tag in tags %}
            <tr>
                <td style="padding: 10px; border: 1px solid #ddd;">{{ tag.id }}</td>
                <td style="padding: 10px; border: 1px solid #ddd;">{{ tag.rfid }}</td>
                <td style="padding: 10px; border: 1px solid #ddd;">{{ tag.label }}</td>
                <td style="padding: 10px; border: 1px solid #ddd;">{{ tag.last_seen.split(' ')[0] if tag.last_seen else "N/A" }}</td>
                <td style="padding: 10px; border: 1px solid #ddd;">{{ tag.last_seen.split(' ')[1] if tag.last_seen else "N/A" }}</td>
                <td style="padding: 10px; border: 1px solid #ddd;">
                    <a href="{{ url_for('edit', id=tag.id) }}">Edit</a> |
                    <a href="{{ url_for('delete', id=tag.id) }}">Delete</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <a href="{{ url_for('logout') }}">Logout</a>
</div>
{% endblock %}
